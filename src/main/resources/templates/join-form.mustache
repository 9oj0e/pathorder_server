<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>패스오더 회원가입</title>
    <link rel="stylesheet" href="/css/joinForm.css"/>
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        .invalid-feedback {
            color: red;
            display: none;
        }
        .valid-feedback {
            color: green;
            display: none;
        }
    </style>
</head>
<body>
<div style="margin-top: 100px; margin-bottom: 100px;">
    <div class="d-flex justify-content-center mb-4">
        <h2>패스오더 회원가입</h2>
    </div>
    <div class="d-flex justify-content-center">
        <div class="border rounded p-3 m-3 shadow">
            <form id="joinForm" action="/stores/join" method="post" enctype="multipart/form-data" novalidate>
                <div class="form-group form-floating m-3 mx-auto">
                    <div class="px-5 mt-5">
                        <div class="form-group form-floating m-3 mx-auto">
                            <input type="text" name="username" id="username" class="form-control" value="jhjhjhjhjh" minlength="3" maxlength="12" pattern="^[a-zA-Z0-9]+$" required>
                            <label for="username">아이디</label>
                            <div class="invalid-feedback">아이디는 3-12자 사이로 공백 없이 영어와 숫자만 사용 가능합니다.</div>
                            <div class="valid-feedback">올바른 아이디 형식입니다.</div>
                        </div>
                        <div class="person-password">
                            <div class="form-group form-floating m-3 mx-auto">
                                <input type="password" name="password" id="password" class="form-control" value="1234" minlength="4" maxlength="20" pattern="^\S+$" required>
                                <label for="password">비밀번호</label>
                                <div class="invalid-feedback">비밀번호는 4-20자 사이로 공백 없이 입력해주세요.</div>
                                <div class="valid-feedback">올바른 비밀번호 형식입니다.</div>
                            </div>
                        </div>
                        <h4 class="border-bottom pb-4">사업자 정보</h4>
                        <div class="form-group form-floating m-3 mx-auto">
                            <input type="text" name="ownerName" id="ownerName" class="form-control" value="정현정" required>
                            <label for="ownerName">사용자 이름</label>
                            <div class="invalid-feedback">사용자 이름을 입력해주세요.</div>
                            <div class="valid-feedback">올바른 사용자 이름입니다.</div>
                        </div>
                        <div class="form-group form-floating m-3 mx-auto">
                            <input type="tel" name="ownerTel" id="ownerTel" class="form-control" value="01012345678" pattern="^\d{10,11}$" required>
                            <label for="ownerTel">전화번호 (숫자만 입력)</label>
                            <div class="invalid-feedback">전화번호는 10-11자리 숫자로 입력해주세요.</div>
                            <div class="valid-feedback">올바른 전화번호입니다.</div>
                        </div>
                        <div class="form-group form-floating m-3 mx-auto">
                            <input type="email" name="ownerEmail" id="ownerEmail" class="form-control" value="jhjhjhjhj@nate.com" required>
                            <label for="ownerEmail">Email</label>
                            <div class="invalid-feedback">올바른 이메일 형식으로 입력해주세요.</div>
                            <div class="valid-feedback">올바른 이메일 형식입니다.</div>
                        </div>
                        <div class="form-group form-floating m-3 mx-auto">
                            <input type="text" name="bizNum" id="bizNum" class="form-control" value="123-12-12345" pattern="^\d{3}-\d{2}-\d{5}$" required>
                            <label for="bizNum">사업자번호</label>
                            <div class="invalid-feedback">사업자번호는 123-12-12345 형식으로 입력해주세요.</div>
                            <div class="valid-feedback">올바른 사업자번호 형식입니다.</div>
                        </div>
                        <h4 class="border-bottom pb-4">매장 정보</h4>
                        <div class="form-group form-floating m-3 mx-auto">
                            <input type="text" name="name" id="storeName" class="form-control" value="단팥 카페" required>
                            <label for="storeName">매장 이름</label>
                            <div class="invalid-feedback">매장 이름을 입력해주세요.</div>
                            <div class="valid-feedback">올바른 매장 이름입니다.</div>
                        </div>
                        <div class="form-group form-floating m-3 mx-auto">
                            <input type="tel" name="tel" id="storeTel" class="form-control" value="01012345678" pattern="^\d{10,11}$" required>
                            <label for="storeTel">전화번호 (숫자만 입력)</label>
                            <div class="invalid-feedback">전화번호는 10-11자리 숫자로 입력해주세요.</div>
                            <div class="valid-feedback">올바른 전화번호입니다.</div>
                        </div>
                        <div class="form-group form-floating m-3 mx-auto">
                            <input type="text" name="address" id="storeAddress" class="form-control" value="부산광역시" required>
                            <label for="storeAddress">주소</label>
                            <div class="invalid-feedback">주소를 입력해주세요.</div>
                            <div class="valid-feedback">올바른 주소입니다.</div>
                            <div class="post-code d-flex justify-content-start">
                                <input type="text" class="form-control" id="postcode" placeholder="우편번호"/>
                                <input type="button" class="search-btn btn btn-outline-primary" onclick="execDaumPostcode()" value="우편번호 찾기"/>
                            </div>
                            <div class="address">
                                <div class="d-flex justify-content-start">
                                    <input type="text" class="form-control" id="roadAddress" placeholder="도로명주소"/>
                                    <input type="text" class="form-control" id="detailAddress" placeholder="상세주소"/>
                                </div>
                                <div>
                                    <input type="text" class="form-control" id="jibunAddress" placeholder="지번주소"/>
                                    <span id="guide" style="color: #999; display: none"></span>
                                    <input type="text" class="form-control" id="extraAddress" placeholder="참고항목"/>
                                </div>
                            </div>
                            <input type="hidden" name="latitude" id="latitude" />
                            <input type="hidden" name="longitude" id="longitude" />
                        </div>
                        <div style="width: 100%;">
                            <button type="submit" class="btn btn-outline-success mb-3" style="width: 100%">가입하기</button>
                        </div>
                    </div>
                </div>
            </form>
            <div class="text-center sj-login-join">
                <p><a href="/person/login-form" style="color: #699b22;">이미 회원이신가요?</a></p>
            </div>
        </div>
    </div>
</div>

<!-- Kakao Maps API 스크립트 -->
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=fefea0311294bbe35b45f365501d0605&libraries=services"></script>

<!-- Daum Postcode API 스크립트 -->
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

<!-- 분리된 JavaScript 파일 -->
<script src="/js/joinForm.js"></script>

<script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const joinForm = document.getElementById('joinForm');
        const inputs = joinForm.querySelectorAll('input[required], input[minlength], input[maxlength], input[pattern]');

        inputs.forEach(input => {
            input.addEventListener('input', function () {
                const invalidFeedback = this.nextElementSibling.nextElementSibling;
                const validFeedback = invalidFeedback.nextElementSibling;
                if (this.checkValidity()) {
                    this.classList.add('is-valid');
                    this.classList.remove('is-invalid');
                    invalidFeedback.style.display = 'none';
                    validFeedback.style.display = 'block';
                } else {
                    this.classList.add('is-invalid');
                    this.classList.remove('is-valid');
                    invalidFeedback.style.display = 'block';
                    validFeedback.style.display = 'none';
                }
            });
        });

        joinForm.addEventListener('submit', function (event) {
            if (!this.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
                inputs.forEach(input => {
                    const invalidFeedback = input.nextElementSibling.nextElementSibling;
                    const validFeedback = invalidFeedback.nextElementSibling;
                    if (!input.checkValidity()) {
                        input.classList.add('is-invalid');
                        invalidFeedback.style.display = 'block';
                        validFeedback.style.display = 'none';
                    }
                });
            }
        }, false);
    });
</script>

</body>
</html>
